# é¾™èŠ¯LS2K0300æ‘„åƒå¤´é‡‡é›†ä¸æ˜¾ç¤ºé¡¹ç›®

åŸºäºé¾™èŠ¯LS2K0300å¼€å‘æ¿çš„USBæ‘„åƒå¤´é‡‡é›†ã€IPS200å±å¹•æ˜¾ç¤ºåŠç½‘ç»œä¼ è¾“å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

[![License](https://img.shields.io/badge/license-GPL%203.0-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-LoongArch64-green.svg)](https://www.loongson.cn/)
[![OpenCV](https://img.shields.io/badge/OpenCV-4.11-orange.svg)](https://opencv.org/)

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†åœ¨é¾™èŠ¯LS2K0300å¼€å‘æ¿ä¸Šï¼š
- âœ… USBæ‘„åƒå¤´å®æ—¶å›¾åƒé‡‡é›†ï¼ˆåŸºäºOpenCV + V4L2ï¼‰
- âœ… IPS200 SPIå±å¹•å®æ—¶æ˜¾ç¤ºï¼ˆåŸºäºFramebufferï¼‰
- âœ… TCPç½‘ç»œæµä¼ è¾“ï¼Œç”µè„‘ç«¯å®æ—¶æŸ¥çœ‹
- âœ… æ”¯æŒå¤šå®¢æˆ·ç«¯åŒæ—¶è¿æ¥ï¼ˆæœ€å¤š2ä¸ªï¼‰
- âœ… å®Œæ•´çš„äº¤å‰ç¼–è¯‘æ”¯æŒ

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LS2K0300å¼€å‘æ¿     â”‚          â”‚   ç”µè„‘ (Ubuntu)     â”‚
â”‚                     â”‚          â”‚                     â”‚
â”‚  USBæ‘„åƒå¤´          â”‚          â”‚                     â”‚
â”‚      â†“              â”‚          â”‚                     â”‚
â”‚  OpenCVé‡‡é›†         â”‚          â”‚                     â”‚
â”‚      â†“              â”‚          â”‚                     â”‚
â”‚  ç°åº¦è½¬æ¢           â”‚          â”‚                     â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  TCP     â”‚                     â”‚
â”‚      â”‚  IPS200æ˜¾ç¤º  â”‚  8888    â”‚  Pythonå®¢æˆ·ç«¯       â”‚
â”‚      â”‚              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚      â†“              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚  OpenCVçª—å£æ˜¾ç¤º     â”‚
â”‚   ç½‘ç»œä¼ è¾“          â”‚          â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¡¬ä»¶è¦æ±‚

- **å¼€å‘æ¿**: é¾™èŠ¯LS2K0300
- **æ‘„åƒå¤´**: USB UVCæ‘„åƒå¤´ï¼ˆæ”¯æŒV4L2ï¼‰
- **å±å¹•**: IPS200 SPIå±å¹•ï¼ˆ240Ã—320ï¼ŒST7789Vé©±åŠ¨ï¼‰
- **ç³»ç»Ÿ**: Linux 4.19å†…æ ¸ï¼ˆå«ST7789Vé©±åŠ¨ï¼‰

### å¼€å‘ç¯å¢ƒ

- **ç¼–è¯‘ç¯å¢ƒ**: x86 Ubuntu 20.04/22.04/24.04
- **å·¥å…·é“¾**: loongson-gnu-toolchain-8.3
- **ç›®æ ‡ç³»ç»Ÿ**: LoongArch64 Linux
- **OpenCV**: 4.11ï¼ˆæ¿å¡ä¸Šï¼‰

### ç¼–è¯‘æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/Cjw128/loongson_camera.git
cd loongson_camera

# 2. è¿›å…¥åº”ç”¨ç›®å½•
cd application/camera_display

# 3. äº¤å‰ç¼–è¯‘
./build_simple.sh
```

### éƒ¨ç½²è¿è¡Œ

```bash
# 1. ä¼ è¾“åˆ°æ¿å¡
scp ../../output/camera_display_ips200 root@<æ¿å¡IP>:~/

# 2. åœ¨æ¿å¡ä¸Šè¿è¡Œ
ssh root@<æ¿å¡IP>
LD_LIBRARY_PATH=/home/root/opencv/lib ./camera_display_ips200
```

### ç”µè„‘ç«¯æŸ¥çœ‹å›¾åƒ

```bash
# 1. å®‰è£…Pythonä¾èµ–
pip3 install opencv-python numpy

# 2. è¿è¡Œå®¢æˆ·ç«¯
cd application/camera_display
python3 camera_viewer.py <æ¿å¡IP>
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
loongson_camera/
â”œâ”€â”€ README.md                      # æœ¬æ–‡æ¡£
â”œâ”€â”€ .gitignore                     # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ äº¤å‰ç¼–è¯‘å®Œæˆè¯´æ˜.md             # äº¤å‰ç¼–è¯‘è¯¦ç»†è¯´æ˜
â”œâ”€â”€ application/                   # åº”ç”¨ç¨‹åº
â”‚   â””â”€â”€ camera_display/           # æ‘„åƒå¤´æ˜¾ç¤ºåº”ç”¨
â”‚       â”œâ”€â”€ README.md              # åº”ç”¨è¯´æ˜
â”‚       â”œâ”€â”€ ä½¿ç”¨æ‰‹å†Œ.md            # è¯¦ç»†ä½¿ç”¨æ‰‹å†Œ
â”‚       â”œâ”€â”€ ç½‘ç»œæ˜¾ç¤ºä½¿ç”¨è¯´æ˜.md    # ç½‘ç»œåŠŸèƒ½æ–‡æ¡£
â”‚       â”œâ”€â”€ build_simple.sh        # äº¤å‰ç¼–è¯‘è„šæœ¬
â”‚       â”œâ”€â”€ camera_viewer.py       # ç”µè„‘ç«¯å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ camera_viewer_debug.py # è°ƒè¯•ç‰ˆå®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ camera_saver.py        # å›¾åƒä¿å­˜ç‰ˆå®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ test_window.py         # OpenCVçª—å£æµ‹è¯•
â”‚       â”œâ”€â”€ include/               # å¤´æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ uvc_camera.h      # USBæ‘„åƒå¤´æ¥å£
â”‚       â”‚   â”œâ”€â”€ ips200_display.h  # IPS200å±å¹•æ¥å£
â”‚       â”‚   â””â”€â”€ network_stream.h  # ç½‘ç»œæµæ¥å£
â”‚       â””â”€â”€ src/                   # æºä»£ç 
â”‚           â”œâ”€â”€ main.cpp          # ä¸»ç¨‹åº
â”‚           â”œâ”€â”€ uvc_camera.cpp    # æ‘„åƒå¤´å®ç°
â”‚           â”œâ”€â”€ ips200_display.cpp # å±å¹•å®ç°
â”‚           â””â”€â”€ network_stream.cpp # ç½‘ç»œæµå®ç°
â”œâ”€â”€ tools/                         # å·¥å…·è„šæœ¬
â””â”€â”€ logs/                          # æ—¥å¿—æ–‡ä»¶
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### å›¾åƒé‡‡é›†
- åˆ†è¾¨ç‡ï¼š160Ã—120 @ 30 FPS
- æ ¼å¼ï¼šç°åº¦å›¾ï¼ˆ8ä½ï¼‰
- æ¥å£ï¼šV4L2 + OpenCV VideoCapture
- è®¾å¤‡ï¼š/dev/video0

### å±å¹•æ˜¾ç¤º
- å±å¹•ï¼šIPS200 (240Ã—320)
- æ ¼å¼ï¼šRGB565 (16ä½)
- æ¥å£ï¼šFramebuffer (/dev/fb0)
- é©±åŠ¨ï¼šST7789V (SPI)

### ç½‘ç»œä¼ è¾“
- åè®®ï¼šTCP
- ç«¯å£ï¼š8888
- æ ¼å¼ï¼šè‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®
- å®¢æˆ·ç«¯ï¼šæœ€å¤š2ä¸ªå¹¶å‘è¿æ¥
- å»¶è¿Ÿï¼š< 50ms (å±€åŸŸç½‘)

## ğŸ“Š æ€§èƒ½å‚æ•°

| å‚æ•° | å€¼ |
|------|-----|
| æ‘„åƒå¤´åˆ†è¾¨ç‡ | 160Ã—120 |
| å±å¹•åˆ†è¾¨ç‡ | 240Ã—320 |
| é‡‡é›†å¸§ç‡ | 30 FPS |
| ç½‘ç»œå¸§ç‡ | 28-30 FPS |
| å›¾åƒæ ¼å¼ | ç°åº¦å›¾ (8ä½) |
| ä¼ è¾“æ ¼å¼ | RGB565 (å±å¹•) / ç°åº¦ (ç½‘ç»œ) |
| ç½‘ç»œå¸¦å®½ | ~4.5 Mbps |
| æœ€å¤§å®¢æˆ·ç«¯ | 2 ä¸ª |

## ğŸ“š æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](application/camera_display/README.md)
- [è¯¦ç»†ä½¿ç”¨æ‰‹å†Œ](application/camera_display/ä½¿ç”¨æ‰‹å†Œ.md)
- [ç½‘ç»œæ˜¾ç¤ºåŠŸèƒ½è¯´æ˜](application/camera_display/ç½‘ç»œæ˜¾ç¤ºä½¿ç”¨è¯´æ˜.md)
- [äº¤å‰ç¼–è¯‘è¯´æ˜](äº¤å‰ç¼–è¯‘å®Œæˆè¯´æ˜.md)

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. OpenCVåº“æ‰¾ä¸åˆ°

```bash
# æ–¹æ³•1: è®¾ç½®ç¯å¢ƒå˜é‡
LD_LIBRARY_PATH=/home/root/opencv/lib ./camera_display_ips200

# æ–¹æ³•2: æ°¸ä¹…é…ç½®
echo "/home/root/opencv/lib" > /etc/ld.so.conf.d/opencv.conf
ldconfig
```

### 2. æ‘„åƒå¤´æ‰“å¼€å¤±è´¥

```bash
# æ£€æŸ¥è®¾å¤‡
ls -l /dev/video0

# åŠ è½½é©±åŠ¨
modprobe uvcvideo
```

### 3. ç½‘ç»œè¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ç«¯å£
netstat -tuln | grep 8888

# æµ‹è¯•è¿æ¥
telnet <æ¿å¡IP> 8888
```

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒæ­å»º

### äº¤å‰ç¼–è¯‘å·¥å…·é“¾

```bash
# å·¥å…·é“¾ä½ç½®ï¼ˆå·²å®‰è£…ï¼‰
/opt/ls_2k0300_env/loongson-gnu-toolchain-8.3-x86_64-loongarch64-linux-gnu-rc1.6/

# éªŒè¯
/opt/ls_2k0300_env/loongson-gnu-toolchain-8.3-x86_64-loongarch64-linux-gnu-rc1.6/bin/loongarch64-linux-gnu-gcc --version
```

### Pythonå®¢æˆ·ç«¯ä¾èµ–

```bash
# Ubuntu/Debian
sudo apt install python3-pip python3-opencv

# æˆ–ä½¿ç”¨pip
pip3 install opencv-python numpy
```

## ğŸ“ æŠ€æœ¯æ ˆ

### æ¿å¡ç«¯
- **è¯­è¨€**: C++11
- **æ¡†æ¶**: OpenCV 4.11
- **æ¥å£**: V4L2, Framebuffer, BSD Socket
- **æ¶æ„**: LoongArch64
- **ç³»ç»Ÿ**: Linux 4.19

### ç”µè„‘ç«¯
- **è¯­è¨€**: Python 3
- **æ¡†æ¶**: OpenCV (opencv-python)
- **ä¾èµ–**: NumPy

## ğŸ“ å‚è€ƒèµ„æ–™

- [é€é£ç§‘æŠ€å¼€æºåº“](https://github.com/seekfree)
- [OpenCVå®˜æ–¹æ–‡æ¡£](https://docs.opencv.org/)
- [V4L2æ–‡æ¡£](https://www.kernel.org/doc/html/latest/userspace-api/media/v4l/v4l2.html)
- [Linux Framebuffer](https://www.kernel.org/doc/Documentation/fb/framebuffer.txt)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºé€é£ç§‘æŠ€å¼€æºåº“å®ç°ï¼Œéµå¾ª GPL 3.0 å¼€æºè®¸å¯è¯ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

- åŸºäºé€é£IPS200å¼€æºåº“é€‚é…
- ç½‘ç»œä¼ è¾“åŠŸèƒ½æ‰©å±•

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

- GitHub: [@Cjw128](https://github.com/Cjw128)
- é¡¹ç›®ä»“åº“: [loongson_camera](https://github.com/Cjw128/loongson_camera)

---

**æœ€åæ›´æ–°**: 2025-11-08
**é¡¹ç›®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
**ä»£ç è´¨é‡**: â­â­â­â­â­ (5/5)
